<h1>Create a new Board</h1>

<form [formGroup]="boardForm" (ngSubmit)="submit()" autocomplete="off" novalidate>
  <div *ngIf="!newDepartment">
    <md-select formControlName="selectedDepartment" placeholder="Department" name="department"
               (change)="departmentSelected()" class="full-width">
      <md-option *ngFor="let department of departments" [value]="department">
        {{department.name}}
      </md-option>
    </md-select>
    <control-messages [control]="boardForm.controls.selectedDepartment"></control-messages>
  </div>

  <div *ngIf="newDepartment" formGroupName="department">
    <md-input-container class="md-block">
      <input mdInput formControlName="name" placeholder="Department Name" required>
    </md-input-container>
    <button md-button (click)="cancelNewDepartment()">Cancel</button>
    <!--<logo-upload name="departmentLogo" [(ngModel)]="newDepartment.documentLogo"></logo-upload>-->
  </div>

  <md-input-container class="md-block">
    <input mdInput formControlName="name" placeholder="Board Name" required>
  </md-input-container>
  <control-messages [control]="boardForm.controls.name"></control-messages>

  <md-input-container class="md-block">
    <textarea mdInput formControlName="purpose" placeholder="Board Purpose" required></textarea>
  </md-input-container>

  <div *ngIf="newDepartment !== null">
    <board-aliases formGroupName="handles" [disableDepartment]="!newDepartment"></board-aliases>
  </div>

  <div formGroupName="settings">
    <rl-tag-input formControlName="postCategories" placeholder="Add Post category"></rl-tag-input>
  </div>

  <div *ngIf="newDepartment" formGroupName="department">
    <rl-tag-input formControlName="memberCategories" placeholder="Add Member category"></rl-tag-input>
  </div>

  <div layout="column" layout-align="space-between stretch">
    <button md-raised-button type="submit" [disabled]="boardForm.invalid">Submit</button>
  </div>
</form>
