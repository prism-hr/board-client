<header class="main-nav">
  <div class="page-width">
    <div fxLayout="row" fxLayoutAlign="space-between">
      <div fxLayout="row" fxLayoutAlign="center">
        <div class="logo-holder">
          <a class="prism-logo" fxHide.xs routerLink="/">
            <img src="assets/prism.svg">
          </a>
          <a class="prism-icon" fxHide.gt-xs routerLink="/">
            <img src="assets/prism-logo.svg">
          </a>
        </div>
        <div *ngIf="user" class="top-nav" fxLayout="row">
          <a pButton class="ui-button" routerLink="/" routerLinkActive="active"
             [routerLinkActiveOptions]="{exact:true}" label="Posts"></a>
          <a pButton class="ui-button" routerLink="/boards" routerLinkActive="active" label="Boards"></a>
          <a pButton class="ui-button" routerLink="/departments" routerLinkActive="active" label="Departments"></a>
        </div>
      </div>
      <nav class="text-right">
        <div *ngIf="!user">
          <button pButton (click)="showLogin()" class="ui-button-warning" label="Log in"></button>
        </div>
        <div *ngIf="user" class="user-header-profile" fxLayout="row">
          <div class="activity">
            <a pButton label="Activities" (click)="activitiesPanel.toggle($event)"
               class="ui-button-info ui-button-icon-only"
               icon="fa-globe"></a>
            <span *ngIf="activities" class="activity-badge active">{{activities.length}}</span>
          </div>
          <a routerLink="/account" class="btn-user">
            <span>{{user.givenName}}</span>
            <b-image [publicId]="user.documentImage?.cloudinaryId"
                     gravity="face" width="150" height="150" radius="max" crop="thumb"></b-image>
            <i *ngIf="!user.documentImage" class="fa-user"></i>
          </a>
          <button pButton (click)="logout()" class="ui-button-warning" label="Log out"></button>
        </div>
      </nav>
    </div>
  </div>
</header>

<p-overlayPanel #activitiesPanel>
  <div *ngIf="activities">
    <div *ngFor="let activity of activities">
      <b-header-activity [activity]="activity"></b-header-activity>
    </div>
  </div>
  <div *ngIf="!activities">
    No new messages.
  </div>

</p-overlayPanel>
