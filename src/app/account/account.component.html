<section>
  <div class="grid" fxLayout="row" fxLayoutAlign="center">
    <div class="grid__item small--one-whole medium-up--three-eighths">
      <form [formGroup]="accountForm" (ngSubmit)="submit()" autocomplete="off">
        <mat-card>
          <mat-card-header>
            <mat-card-title>
              <h2>Account</h2>
            </mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div *ngIf="accountFormError">
              <p-messages [value]="[{severity:'error', detail:accountFormError}]"></p-messages>
            </div>
            <div class="block-avatar">
              <div>
                <b-file-upload formControlName="documentImage" type="avatar" class="avatar"></b-file-upload>
              </div>
            </div>
            <div class="grid">
              <div class="grid__item small--one-whole medium-up--one-half input-holder">
                <input pInputText formControlName="givenName" placeholder="First Name">
                <control-messages [control]="accountForm.get('givenName')"></control-messages>
              </div>
              <div class="grid__item small--one-whole medium-up--one-half">
                <input pInputText formControlName="surname" placeholder="Last Name">
                <control-messages [control]="accountForm.get('surname')"></control-messages>
              </div>
            </div>
            <div class="grid">
              <div class="grid__item small--one-whole input-holder">
                <input pInputText formControlName="email" type="email" placeholder="Email">
                <control-messages [control]="accountForm.get('email')"></control-messages>
              </div>
            </div>

            <div class="grid">
              <div class="grid__item small--one-whole medium-up--one-whole input-holder">
                <div class="ui-radiobutton-inline">
                  <p-radioButton *ngFor="let gender of availableGenders"
                                 [value]="gender" [label]="'definitions.gender.' + gender | translate" name="gender"
                                 formControlName="gender" class="{{gender | lowercase}}"></p-radioButton>
                </div>
                <control-messages [control]="accountForm.get('gender')"></control-messages>
              </div>
              <div class="grid__item small--one-whole medium-up--one-whole input-holder">
                <div class="ui-radiobutton-inline">
                  <p-radioButton *ngFor="let ageRange of availableAgeRanges"
                                 [value]="ageRange" [label]="'definitions.ageRange.' + ageRange | translate"
                                 name="ageRange"
                                 formControlName="ageRange" class="{{ageRange | lowercase}}"></p-radioButton>
                </div>
                <control-messages [control]="accountForm.get('ageRange')"></control-messages>
              </div>

              <div class="grid__item small--one-whole medium-up--one-half input-holder clearfix">
                <label>Location</label>
                <b-places-autocomplete formControlName="locationNationality"></b-places-autocomplete>
                <control-messages [control]="accountForm.get('locationNationality')"></control-messages>
              </div>
            </div>

          </mat-card-content>
          <mat-card-actions>
            <button pButton class="ui-button-warning" label="Submit"></button>
          </mat-card-actions>
        </mat-card>
      </form>

      <mat-card>
        <mat-card-header>
          <mat-card-title>
            <h2>Password</h2>
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div *ngIf="!changePasswordRequested">
            <button pButton (click)="requestPasswordChange()" class="ui-button-warning"
                    label="Change Password"></button>
          </div>
          <div *ngIf="changePasswordRequested">
            An email has been sent to you. Follow the instructions inside the email to reset your password.
          </div>
        </mat-card-content>
      </mat-card>
    </div>
    <div class="grid__item small--one-whole medium-up--three-eighths">
      <mat-card>
        <mat-card-header>
          <mat-card-title>
            <h2>Notifications</h2>
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <b-account-notifications [suppressions]="suppressions"></b-account-notifications>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</section>
